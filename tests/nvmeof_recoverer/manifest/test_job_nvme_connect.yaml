apiVersion: batch/v1
kind: Job
metadata:
  name: nvme-connect-job
  namespace: default
spec:
  template:
    spec:
      containers:
        - name: nvmeof-connect
          image: quay.io/ceph/ceph:v18
          command: ["sh", "-c", "sleep 36000"]
          env:
            - name: MODE
              value: "connect"
            - name: SUBNQN
              value: "nqn.2023-01.com.samsung.semiconductor:fc641c65-2548-4788-961f-a7ebaab3dc6a:0.2.S63UNG0T619224"
            - name: ADDRESS
              value: "192.168.100.14"
            - name: PORT
              value: "1152"
            - name: CONFIG_MAP_NAME
              value: "nvme-connect-result"
            - name: NAMESPACE
              value: "default"
          volumeMounts:
            - name: host-dev
              mountPath: /dev
          securityContext:
            privileged: true
      restartPolicy: Never
      nodeSelector:
        kubernetes.io/hostname: "qemu1"
      volumes:
        - name: host-dev
          hostPath:
            path: /dev
      hostNetwork: true
